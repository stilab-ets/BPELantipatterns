<?xml version="1.0" encoding="UTF-8"?>
<ns3:process xmlns:abx="http://www.activebpel.org/bpel/extension" xmlns:aei="http://www.activebpel.org/2009/02/bpel/extension/ignorable" xmlns:approvews="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApproval.wsdl" xmlns:b4p="http://www.example.org/BPEL4People" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:crmws="http://docs.active-endpoints.com/sample/wsdl/loanCRM/2008/02/loanCRM.wsdl" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:ext="http://www.activebpel.org/2006/09/bpel/extension/query_handling" xmlns:ext1="http://www.activebpel.org/2009/06/bpel/extension/links" xmlns:htd="http://www.example.org/WS-HT" xmlns:loan="http://schemas.active-endpoints.com/sample/LoanRequest/2008/02/loanRequest.xsd" xmlns:loanhuman="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApprovalHuman.wsdl" xmlns:loanmsg="http://docs.active-endpoints.com/sample/wsdl/loanMessages/2008/02/loanMessages.wsdl" xmlns:loanprocess="http://docs.active-endpoints.com/sample/wsdl/loanprocess/2008/02/loanProcess.wsdl" xmlns:ns1="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" xmlns:ns2="http://loanProcessHuman" xmlns:ns3="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:ns4="http://loanProcessHuman/public" xmlns:riskws="http://docs.active-endpoints.com/sample/wsdl/riskAssessment/2008/02/riskAssessment.wsdl" xmlns:types1="http://schemas.active-endpoints.com/sample/LoanMod/2009/loanMod.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema" aei:editStyle="BPMN" ext1:linksAreTransitions="yes" ext:createTargetXPath="yes" ext:disableSelectionFailure="yes" name="LoanProcess" suppressJoinFailure="yes" targetNamespace="http://loanProcess">
   <ns3:documentation>This sample Loan Process reads an XML document from the resource catalog, which controls &#13;
branching logic within the process.  If more than one loan over the threshold is requested within &#13;
an hour, a manager is assigned a task automatically to review the threshold for loan amounts which &#13;
can be automatically processed by the system.</ns3:documentation>
   <b4p:humanInteractions xmlns:abx="http://www.activebpel.org/bpel/extension" xmlns:aei="http://www.activebpel.org/2009/02/bpel/extension/ignorable" xmlns:approvews="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApproval.wsdl" xmlns:b4p="http://www.example.org/BPEL4People" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:crmws="http://docs.active-endpoints.com/sample/wsdl/loanCRM/2008/02/loanCRM.wsdl" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:ext="http://www.activebpel.org/2006/09/bpel/extension/query_handling" xmlns:ext1="http://www.activebpel.org/2009/06/bpel/extension/links" xmlns:htd="http://www.example.org/WS-HT" xmlns:loan="http://schemas.active-endpoints.com/sample/LoanRequest/2008/02/loanRequest.xsd" xmlns:loanhuman="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApprovalHuman.wsdl" xmlns:loanmsg="http://docs.active-endpoints.com/sample/wsdl/loanMessages/2008/02/loanMessages.wsdl" xmlns:loanprocess="http://docs.active-endpoints.com/sample/wsdl/loanprocess/2008/02/loanProcess.wsdl" xmlns:ns1="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" xmlns:ns2="http://loanProcessHuman" xmlns:ns3="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:ns4="http://loanProcessHuman/public" xmlns:riskws="http://docs.active-endpoints.com/sample/wsdl/riskAssessment/2008/02/riskAssessment.wsdl" xmlns:types1="http://schemas.active-endpoints.com/sample/LoanMod/2009/loanMod.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
      <htd:logicalPeopleGroups>
         <htd:logicalPeopleGroup name="loanmgrs" xmlns:abx="http://www.activebpel.org/bpel/extension" xmlns:aei="http://www.activebpel.org/2009/02/bpel/extension/ignorable" xmlns:approvews="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApproval.wsdl" xmlns:b4p="http://www.example.org/BPEL4People" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:crmws="http://docs.active-endpoints.com/sample/wsdl/loanCRM/2008/02/loanCRM.wsdl" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:ext="http://www.activebpel.org/2006/09/bpel/extension/query_handling" xmlns:ext1="http://www.activebpel.org/2009/06/bpel/extension/links" xmlns:htd="http://www.example.org/WS-HT" xmlns:loan="http://schemas.active-endpoints.com/sample/LoanRequest/2008/02/loanRequest.xsd" xmlns:loanhuman="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApprovalHuman.wsdl" xmlns:loanmsg="http://docs.active-endpoints.com/sample/wsdl/loanMessages/2008/02/loanMessages.wsdl" xmlns:loanprocess="http://docs.active-endpoints.com/sample/wsdl/loanprocess/2008/02/loanProcess.wsdl" xmlns:ns1="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" xmlns:ns2="http://loanProcessHuman" xmlns:ns3="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:ns4="http://loanProcessHuman/public" xmlns:riskws="http://docs.active-endpoints.com/sample/wsdl/riskAssessment/2008/02/riskAssessment.wsdl" xmlns:types1="http://schemas.active-endpoints.com/sample/LoanMod/2009/loanMod.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
         <htd:logicalPeopleGroup name="loanreps" xmlns:abx="http://www.activebpel.org/bpel/extension" xmlns:aei="http://www.activebpel.org/2009/02/bpel/extension/ignorable" xmlns:approvews="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApproval.wsdl" xmlns:b4p="http://www.example.org/BPEL4People" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:crmws="http://docs.active-endpoints.com/sample/wsdl/loanCRM/2008/02/loanCRM.wsdl" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:ext="http://www.activebpel.org/2006/09/bpel/extension/query_handling" xmlns:ext1="http://www.activebpel.org/2009/06/bpel/extension/links" xmlns:htd="http://www.example.org/WS-HT" xmlns:loan="http://schemas.active-endpoints.com/sample/LoanRequest/2008/02/loanRequest.xsd" xmlns:loanhuman="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApprovalHuman.wsdl" xmlns:loanmsg="http://docs.active-endpoints.com/sample/wsdl/loanMessages/2008/02/loanMessages.wsdl" xmlns:loanprocess="http://docs.active-endpoints.com/sample/wsdl/loanprocess/2008/02/loanProcess.wsdl" xmlns:ns1="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" xmlns:ns2="http://loanProcessHuman" xmlns:ns3="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:ns4="http://loanProcessHuman/public" xmlns:riskws="http://docs.active-endpoints.com/sample/wsdl/riskAssessment/2008/02/riskAssessment.wsdl" xmlns:types1="http://schemas.active-endpoints.com/sample/LoanMod/2009/loanMod.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema"/>
      </htd:logicalPeopleGroups>
      <htd:tasks>
         <htd:task name="approveTask" xmlns:abx="http://www.activebpel.org/bpel/extension" xmlns:aei="http://www.activebpel.org/2009/02/bpel/extension/ignorable" xmlns:approvews="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApproval.wsdl" xmlns:b4p="http://www.example.org/BPEL4People" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:crmws="http://docs.active-endpoints.com/sample/wsdl/loanCRM/2008/02/loanCRM.wsdl" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:ext="http://www.activebpel.org/2006/09/bpel/extension/query_handling" xmlns:ext1="http://www.activebpel.org/2009/06/bpel/extension/links" xmlns:htd="http://www.example.org/WS-HT" xmlns:loan="http://schemas.active-endpoints.com/sample/LoanRequest/2008/02/loanRequest.xsd" xmlns:loanhuman="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApprovalHuman.wsdl" xmlns:loanmsg="http://docs.active-endpoints.com/sample/wsdl/loanMessages/2008/02/loanMessages.wsdl" xmlns:loanprocess="http://docs.active-endpoints.com/sample/wsdl/loanprocess/2008/02/loanProcess.wsdl" xmlns:ns1="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" xmlns:ns2="http://loanProcessHuman" xmlns:ns3="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:ns4="http://loanProcessHuman/public" xmlns:riskws="http://docs.active-endpoints.com/sample/wsdl/riskAssessment/2008/02/riskAssessment.wsdl" xmlns:types1="http://schemas.active-endpoints.com/sample/LoanMod/2009/loanMod.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
            <htd:interface xmlns:ns="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApproval.wsdl" operation="approve" portType="ns:LoanApproval"/>
            <htd:priority>3</htd:priority>
            <htd:peopleAssignments>
               <htd:potentialOwners>
                  <htd:from logicalPeopleGroup="loanreps"/>
               </htd:potentialOwners>
               <htd:taskInitiator>
                  <htd:from>
                     <htd:literal>
                        <ht:organizationalEntity xmlns:ht="http://www.example.org/WS-HT">
	                                <ht:users>
		                                  <ht:user>Loan Process</ht:user>
	                                </ht:users>
                              </ht:organizationalEntity>
                     </htd:literal>
                  </htd:from>
               </htd:taskInitiator>
               <htd:businessAdministrators>
                  <htd:from logicalPeopleGroup="loanmgrs"/>
               </htd:businessAdministrators>
            </htd:peopleAssignments>
            <htd:presentationElements>
               <htd:name>Loan for review</htd:name>
               <htd:presentationParameters>
                  <htd:presentationParameter name="loansummary" type="xsd:string">concat( htd:getInput('Document')/loan:lastName , ", ", htd:getInput('Document')/loan:firstName , "; $" ,htd:getInput('Document')/loan:amountRequested )</htd:presentationParameter>
                  <htd:presentationParameter name="lastName" type="xsd:string">htd:getInput('Document')/loan:lastName</htd:presentationParameter>
                  <htd:presentationParameter name="loanAmount" type="xsd:integer">htd:getInput('Document')/loan:amountRequested</htd:presentationParameter>
                  <htd:presentationParameter name="loanDescription" type="xsd:string">htd:getInput('Document')/loan:loanDescription</htd:presentationParameter>
                  <htd:presentationParameter name="loanType" type="xsd:string">htd:getInput('Document')/loan:loanType</htd:presentationParameter>
                  <htd:presentationParameter name="firstName" type="xsd:string">htd:getInput('Document')/loan:firstName</htd:presentationParameter>
               </htd:presentationParameters>
               <htd:subject>Please look at this loan and approve or decline it. (for {$loansummary})</htd:subject>
            </htd:presentationElements>
            <htd:renderings>
               <htd:rendering xmlns:ns="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" type="ns:AjaxForm">
                  <avcform:ajaxFormRendering xmlns:avcform="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" developmentMode="false" xmlns:abx="http://www.activebpel.org/bpel/extension" xmlns:aei="http://www.activebpel.org/2009/02/bpel/extension/ignorable" xmlns:approvews="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApproval.wsdl" xmlns:b4p="http://www.example.org/BPEL4People" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:crmws="http://docs.active-endpoints.com/sample/wsdl/loanCRM/2008/02/loanCRM.wsdl" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:ext="http://www.activebpel.org/2006/09/bpel/extension/query_handling" xmlns:ext1="http://www.activebpel.org/2009/06/bpel/extension/links" xmlns:htd="http://www.example.org/WS-HT" xmlns:loan="http://schemas.active-endpoints.com/sample/LoanRequest/2008/02/loanRequest.xsd" xmlns:loanhuman="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApprovalHuman.wsdl" xmlns:loanmsg="http://docs.active-endpoints.com/sample/wsdl/loanMessages/2008/02/loanMessages.wsdl" xmlns:loanprocess="http://docs.active-endpoints.com/sample/wsdl/loanprocess/2008/02/loanProcess.wsdl" xmlns:ns="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" xmlns:ns1="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" xmlns:ns2="http://loanProcessHuman" xmlns:ns3="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:ns4="http://loanProcessHuman/public" xmlns:riskws="http://docs.active-endpoints.com/sample/wsdl/riskAssessment/2008/02/riskAssessment.wsdl" xmlns:types1="http://schemas.active-endpoints.com/sample/LoanMod/2009/loanMod.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                           <avcform:location>project:/CustomerService/form/task/approveTask.html</avcform:location>
                        </avcform:ajaxFormRendering>
               </htd:rendering>
            </htd:renderings>
            <htd:deadlines>
               <htd:startDeadline>
                  <htd:for expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">'PT120M'</htd:for>
                  <htd:escalation name="TwoHourReminder">
                     <htd:notification name="ReminderToReps">
                        <htd:interface xmlns:ns="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApprovalHuman.wsdl" operation="remind" portType="ns:LoanApprovalPeople"/>
                        <htd:priority>2</htd:priority>
                        <htd:peopleAssignments>
                           <htd:businessAdministrators>
                              <htd:from logicalPeopleGroup="loanmgrs"/>
                           </htd:businessAdministrators>
                           <htd:recipients>
                              <htd:from logicalPeopleGroup="loanreps"/>
                           </htd:recipients>
                        </htd:peopleAssignments>
                        <htd:presentationElements>
                           <htd:name>Unclaimed Task reminder</htd:name>
                           <htd:presentationParameters>
                              <htd:presentationParameter xmlns:ns="http://www.w3.org/2001/XMLSchema" name="firstname" type="ns:string">htd:getInput('Document', 'approveTask')/loan:firstName</htd:presentationParameter>
                              <htd:presentationParameter xmlns:ns="http://www.w3.org/2001/XMLSchema" name="lastname" type="ns:string">htd:getInput('Document', 'approveTask')/loan:lastName</htd:presentationParameter>
                              <htd:presentationParameter xmlns:ns="http://www.w3.org/2001/XMLSchema" name="amount" type="ns:string">htd:getInput('Document', 'approveTask')/loan:amountRequested</htd:presentationParameter>
                              <htd:presentationParameter xmlns:ns="http://www.w3.org/2001/XMLSchema" name="priority" type="ns:string">htd:getTaskPriority()</htd:presentationParameter>
                           </htd:presentationParameters>
                           <htd:subject>There is a loan task waiting to be claimed. ({$lastname}, {$firstname}; ${$amount} priority {$priority})</htd:subject>
                           <htd:description>A loan review has been unclaimed for 2 hours. Please go to your inbox and claim if appropriate.</htd:description>
                        </htd:presentationElements>
                        <htd:renderings>
                           <htd:rendering xmlns:ns="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" type="ns:AjaxForm">
                              <avcform:ajaxFormRendering xmlns:avcform="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" developmentMode="false" xmlns:abx="http://www.activebpel.org/bpel/extension" xmlns:aei="http://www.activebpel.org/2009/02/bpel/extension/ignorable" xmlns:approvews="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApproval.wsdl" xmlns:b4p="http://www.example.org/BPEL4People" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:crmws="http://docs.active-endpoints.com/sample/wsdl/loanCRM/2008/02/loanCRM.wsdl" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:ext="http://www.activebpel.org/2006/09/bpel/extension/query_handling" xmlns:ext1="http://www.activebpel.org/2009/06/bpel/extension/links" xmlns:htd="http://www.example.org/WS-HT" xmlns:loan="http://schemas.active-endpoints.com/sample/LoanRequest/2008/02/loanRequest.xsd" xmlns:loanhuman="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApprovalHuman.wsdl" xmlns:loanmsg="http://docs.active-endpoints.com/sample/wsdl/loanMessages/2008/02/loanMessages.wsdl" xmlns:loanprocess="http://docs.active-endpoints.com/sample/wsdl/loanprocess/2008/02/loanProcess.wsdl" xmlns:ns="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" xmlns:ns1="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" xmlns:ns2="http://loanProcessHuman" xmlns:ns3="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:ns4="http://loanProcessHuman/public" xmlns:riskws="http://docs.active-endpoints.com/sample/wsdl/riskAssessment/2008/02/riskAssessment.wsdl" xmlns:types1="http://schemas.active-endpoints.com/sample/LoanMod/2009/loanMod.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                       <avcform:location>project:/CustomerService/form/task/ReminderToReps.html</avcform:location>
                                    </avcform:ajaxFormRendering>
                           </htd:rendering>
                        </htd:renderings>
                     </htd:notification>
                  </htd:escalation>
               </htd:startDeadline>
               <htd:completionDeadline>
                  <htd:for expressionLanguage="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0">'PT130M'</htd:for>
                  <htd:escalation name="EscalateIfNotActedUpon">
                     <htd:notification name="NotifyReassignToManager">
                        <htd:interface xmlns:ns="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApprovalHuman.wsdl" operation="remind" portType="ns:LoanApprovalPeople"/>
                        <htd:priority>1</htd:priority>
                        <htd:peopleAssignments>
                           <htd:businessAdministrators>
                              <htd:from logicalPeopleGroup="loanmgrs"/>
                           </htd:businessAdministrators>
                           <htd:recipients>
                              <htd:from logicalPeopleGroup="loanreps"/>
                           </htd:recipients>
                        </htd:peopleAssignments>
                        <htd:presentationElements>
                           <htd:name>Escalated To Manager</htd:name>
                           <htd:subject>This loan is being reassigned to loanmgr1 for review</htd:subject>
                           <htd:description>Needs to be completed within 10 minutes!</htd:description>
                        </htd:presentationElements>
                        <htd:renderings>
                           <htd:rendering xmlns:ns="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" type="ns:AjaxForm">
                              <avcform:ajaxFormRendering xmlns:avcform="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" developmentMode="false" xmlns:abx="http://www.activebpel.org/bpel/extension" xmlns:aei="http://www.activebpel.org/2009/02/bpel/extension/ignorable" xmlns:approvews="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApproval.wsdl" xmlns:b4p="http://www.example.org/BPEL4People" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:crmws="http://docs.active-endpoints.com/sample/wsdl/loanCRM/2008/02/loanCRM.wsdl" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:ext="http://www.activebpel.org/2006/09/bpel/extension/query_handling" xmlns:ext1="http://www.activebpel.org/2009/06/bpel/extension/links" xmlns:htd="http://www.example.org/WS-HT" xmlns:loan="http://schemas.active-endpoints.com/sample/LoanRequest/2008/02/loanRequest.xsd" xmlns:loanhuman="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApprovalHuman.wsdl" xmlns:loanmsg="http://docs.active-endpoints.com/sample/wsdl/loanMessages/2008/02/loanMessages.wsdl" xmlns:loanprocess="http://docs.active-endpoints.com/sample/wsdl/loanprocess/2008/02/loanProcess.wsdl" xmlns:ns="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" xmlns:ns1="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" xmlns:ns2="http://loanProcessHuman" xmlns:ns3="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:ns4="http://loanProcessHuman/public" xmlns:riskws="http://docs.active-endpoints.com/sample/wsdl/riskAssessment/2008/02/riskAssessment.wsdl" xmlns:types1="http://schemas.active-endpoints.com/sample/LoanMod/2009/loanMod.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                                       <avcform:location>project:/CustomerService/form/task/NotifyReassignToManager.html</avcform:location>
                                    </avcform:ajaxFormRendering>
                           </htd:rendering>
                        </htd:renderings>
                     </htd:notification>
                  </htd:escalation>
                  <htd:escalation name="ReassignToMgr1">
                     <htd:reassignment>
                        <htd:potentialOwners>
                           <htd:from>
                              <htd:literal>
                                 <ht:organizationalEntity xmlns:ht="http://www.example.org/WS-HT">
	                                         <ht:users>
		                                           <ht:user>loanmgr1</ht:user>
	                                         </ht:users>
                                       </ht:organizationalEntity>
                              </htd:literal>
                           </htd:from>
                        </htd:potentialOwners>
                     </htd:reassignment>
                  </htd:escalation>
               </htd:completionDeadline>
            </htd:deadlines>
         </htd:task>
      </htd:tasks>
      <htd:notifications/>
   </b4p:humanInteractions>
   <bpmndi:BPMNDiagram aei:bpelDigest="" aei:editStyle="BPMN" aei:layoutNeeded="false" aei:modelVersion="4" aei:objectId="132103617873723395" aei:processInitiatorSim="" isHorizontal="false" xmlns:aei="http://www.activebpel.org/2009/02/bpel/extension/ignorable" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI">
      <bpmndi:BPMNPlane>
         <bpmndi:BPMNShape aei:backgroundImageLocation="icons/bpmn/activity/ActivityBlock.png" aei:objectId="130745801550392333" aei:type="PARTNER_LINK" aei:visible="false,false,false,false,false," bpmnElement="130745801550392333"/>
         <bpmndi:BPMNShape aei:backgroundImageLocation="icons/bpmn/activity/ActivityBlock.png" aei:objectId="130745801551392345" aei:type="PARTNER_LINK" aei:visible="false,false,false,false,false," bpmnElement="130745801551392345"/>
         <bpmndi:BPMNShape aei:backgroundImageLocation="icons/bpmn/activity/ActivityBlock.png" aei:objectId="130745801551392357" aei:type="PARTNER_LINK" aei:visible="false,false,false,false,false," bpmnElement="130745801551392357"/>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {50,30}" aei:absoluteSize="DIM {205,39}" aei:font="FONT {Tahoma,16,1}" aei:fontColor="RGB {128,128,128}" aei:objectId="128274453015107131" aei:parentElement="process" aei:text="Loan Process" aei:type="LABEL" bpmnElement="128274453015107131">
            <dc:Bounds height="39" width="205" x="40" y="20"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {15,10}" aei:absoluteSize="DIM {1069,468}" aei:objectId="128257882650000183" aei:type="SEQUENCE" bpmnElement="128257882650000183" isHorizontal="true">
            <dc:Bounds height="-1" width="-1" x="5" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {25,214}" aei:absoluteSize="DIM {70,60}" aei:attachments="" aei:name="Receive Application" aei:objectId="128257882650100185" aei:principal="" aei:type="RECEIVE" bpmnElement="128257882650100185">
            <dc:Bounds height="60" width="70" x="0" y="0"/>
            <bpmndi:BPMNLabel aei:absoluteLocation="LOC {33,276}" aei:absoluteSize="DIM {104,15}" aei:anchor.location="1" aei:anchor.objectId="128257882650100185" aei:backgroundColor="RGB {255,255,255}" aei:font="FONT {Segoe UI,9,0}" aei:objectId="132103617875323605" aei:relative.location="LOC {-37,52}" aei:sizeToFit="true" aei:text="Receive Application" bpmnElement="128257882650100185label">
               <dc:Bounds height="-1" width="-1" x="0" y="0"/>
            </bpmndi:BPMNLabel>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {120,218}" aei:absoluteSize="DIM {125,53}" aei:backgroundImageLocation="icons/bpmn/activity/blocks/ActivityBlockWhite.png" aei:name="Get Cutoff Amount for Large Loans" aei:objectId="128257882650400189" aei:type="ASSIGN" bpmnElement="128257882650400189">
            <dc:Bounds height="53" width="125" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:fromExpression="abx:getCatalogResource(&quot;project:/CustomerService/runtimeParameters/approvalParameters.xml&quot;)" aei:fromType="3" aei:objectId="130807461413629197" aei:toVariable="approvalParams" aei:type="ASSIGN_COPY" bpmnElement="130807461413629197"/>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {270,218}" aei:absoluteSize="DIM {125,53}" aei:attachments="" aei:backgroundImageLocation="icons/bpmn/activity/blocks/ActivityBlockYellow.png" aei:name="Assess Risk" aei:objectId="128257882650500193" aei:subprocessPath="" aei:type="INVOKE" bpmnElement="128257882650500193">
            <dc:Bounds height="53" width="125" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {420,20}" aei:absoluteSize="DIM {654,448}" aei:name="Large loan or moderate risk" aei:objectId="128257882650600197" aei:type="IF" bpmnElement="128257882650600197" isHorizontal="true">
            <dc:Bounds height="448" width="654" x="0" y="0"/>
            <bpmndi:BPMNLabel aei:absoluteLocation="LOC {466,159}" aei:absoluteSize="DIM {144,15}" aei:anchor.location="4" aei:anchor.objectId="128257882650600197" aei:backgroundColor="RGB {255,255,255}" aei:font="FONT {Segoe UI,9,0}" aei:objectId="132103617876823617" aei:relative.location="LOC {1,-79}" aei:sizeToFit="true" aei:text="Large loan or moderate risk" bpmnElement="128257882650600197label">
               <dc:Bounds height="-1" width="-1" x="0" y="0"/>
            </bpmndi:BPMNLabel>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:IF_EXPRESSION="(($riskAssessment/loan:riskAssessment != 'high' and $creditInformation/loan:amountRequested &gt;= $approvalParams/loan:amountRequiresHumanApproval) or $riskAssessment/loan:riskAssessment = 'review')" aei:IF_EXPR_LANG="urn:oasis:names:tc:wsbpel:2.0:sublang:xpath1.0" aei:absoluteLocation="LOC {490,20}" aei:absoluteSize="DIM {524,118}" aei:objectId="132103617876823619" aei:text=" " aei:type="ELSE_IF" bpmnElement="128257882650600197ifDef">
            <dc:Bounds height="118" width="524" x="0" y="0"/>
            <bpmndi:BPMNLabel aei:absoluteLocation="LOC {488,74}" aei:absoluteSize="DIM {3,15}" aei:anchor.location="4" aei:anchor.objectId="128257882650800201" aei:backgroundColor="RGB {255,255,255}" aei:font="FONT {Segoe UI,9,0}" aei:objectId="132103617876823645" aei:relative.location="LOC {-31,-15}" aei:sizeToFit="true" aei:text=" " bpmnElement="128257882650600197ifDeflabel">
               <dc:Bounds height="-1" width="-1" x="0" y="0"/>
            </bpmndi:BPMNLabel>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {529,39}" aei:absoluteSize="DIM {485,80}" aei:objectId="128257882651000203" aei:type="SEQUENCE" bpmnElement="128257882651000203" isHorizontal="true">
            <dc:Bounds height="85" width="490" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {539,49}" aei:absoluteSize="DIM {70,60}" aei:name="Under Review" aei:objectId="128257882651000205" aei:type="REPLY" bpmnElement="128257882651000205">
            <dc:Bounds height="60" width="70" x="0" y="0"/>
            <bpmndi:BPMNLabel aei:absoluteLocation="LOC {549,106}" aei:absoluteSize="DIM {72,15}" aei:anchor.location="1" aei:anchor.objectId="128257882651000205" aei:backgroundColor="RGB {255,255,255}" aei:font="FONT {Segoe UI,9,0}" aei:objectId="132103617876823625" aei:relative.location="LOC {-35,47}" aei:sizeToFit="true" aei:text="Under Review" bpmnElement="128257882651000205label">
               <dc:Bounds height="-1" width="-1" x="0" y="0"/>
            </bpmndi:BPMNLabel>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:implicitScopeIO="INPUT" aei:objectId="128257882651200215" aei:type="ASSIGN" bpmnElement="128257882651200215">
            <dc:Bounds height="-1" width="-1" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:fromLiteral="&lt;loan:loanApprovalResponse xmlns:loan=&quot;http://schemas.active-endpoints.com/sample/LoanRequest/2008/02/loanRequest.xsd&quot;&gt;&#13;&#10;                                 &lt;loan:responseToLoanRequest&gt;underReview&lt;/loan:responseToLoanRequest&gt;&#13;&#10;                                 &lt;loan:responseDescription/&gt;&#13;&#10;                              &lt;/loan:loanApprovalResponse&gt;" aei:fromType="4" aei:objectId="130807461414629221" aei:toPart="Document" aei:toVariable="parameters" aei:type="ASSIGN_COPY" bpmnElement="130807461414629221"/>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {634,53}" aei:absoluteSize="DIM {125,53}" aei:actualOwnerSim="" aei:backgroundImageLocation="icons/bpmn/activity/blocks/ActivityBlockBlue.png" aei:bpmNotation="UserTask" aei:extensionActivityId="com.activee.bpel4peopleep.activities.peopleActivity" aei:name="Review Loan" aei:objectId="128257882651400219" aei:paSimulationFaultName="" aei:paSimulationOutput="" aei:paSimulationOutputAttachments="" aei:paSimulationResult="0" aei:type="EXTENSION_ACTIVITY" bpmnElement="128257882651400219">
            <dc:Bounds height="53" width="125" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {784,53}" aei:absoluteSize="DIM {125,53}" aei:backgroundImageLocation="icons/bpmn/activity/blocks/ActivityBlockYellow.png" aei:bpmNotation="SendTask" aei:name="Notify Customer Service Of Decision" aei:objectId="128257882655200221" aei:subprocessPath="" aei:type="INVOKE" bpmnElement="128257882655200221">
            <dc:Bounds height="53" width="125" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {934,49}" aei:absoluteSize="DIM {70,60}" aei:backgroundColor="RGB {226,226,226}" aei:backgroundImageLocation="icons/bpmn/activity/ActivityBlock.png" aei:borderColor="RGB {0,0,255}" aei:bpmNotation="NoneEvent" aei:collapsed="false" aei:drawBorder="false" aei:font="${system.default}" aei:fontColor="RGB {0,0,0}" aei:imageDisplay="true" aei:imageTextGap="4" aei:joinCondition="" aei:joinConditionLang="" aei:name="" aei:objectId="128257882655300223" aei:scaleImage="false" aei:sizeToFit="true" aei:text="" aei:textAlignment="1" aei:textFormat="1" aei:textPlacement="16" aei:transparent="true" aei:type="NONE_EVENT" bpmnElement="128257882655300223">
            <dc:Bounds height="-1" width="-1" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {490,163}" aei:absoluteSize="DIM {524,305}" aei:objectId="128257882655800229" aei:text=" " aei:type="ELSE" bpmnElement="128257882650600197elseDef">
            <dc:Bounds height="305" width="468" x="0" y="0"/>
            <bpmndi:BPMNLabel aei:absoluteLocation="LOC {509,310}" aei:absoluteSize="DIM {3,15}" aei:anchor.location="4" aei:anchor.objectId="128257882655800229" aei:backgroundColor="RGB {255,255,255}" aei:font="FONT {Segoe UI,9,0}" aei:objectId="132103617876823679" aei:relative.location="LOC {-10,-15}" aei:sizeToFit="true" aei:text=" " bpmnElement="128257882650600197elseDeflabel">
               <dc:Bounds height="-1" width="-1" x="0" y="0"/>
            </bpmndi:BPMNLabel>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {529,182}" aei:absoluteSize="DIM {429,267}" aei:objectId="128257882655900231" aei:type="SEQUENCE" bpmnElement="128257882655900231" isHorizontal="true">
            <dc:Bounds height="267" width="429" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {539,192}" aei:absoluteSize="DIM {314,247}" aei:name=" " aei:objectId="128257882655900233" aei:type="IF" bpmnElement="128257882655900233" isHorizontal="true">
            <dc:Bounds height="247" width="314" x="0" y="0"/>
            <bpmndi:BPMNLabel aei:absoluteLocation="LOC {591,289}" aei:absoluteSize="DIM {3,15}" aei:anchor.location="4" aei:anchor.objectId="128257882655900233" aei:backgroundColor="RGB {255,255,255}" aei:font="FONT {Segoe UI,9,0}" aei:objectId="132103617876823653" aei:relative.location="LOC {7,-20}" aei:sizeToFit="true" aei:text=" " bpmnElement="128257882655900233label">
               <dc:Bounds height="-1" width="-1" x="0" y="0"/>
            </bpmndi:BPMNLabel>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:IF_EXPRESSION="$riskAssessment/loan:riskAssessment = 'low'" aei:IF_EXPR_LANG="" aei:absoluteLocation="LOC {609,192}" aei:absoluteSize="DIM {184,111}" aei:objectId="132103617876823655" aei:text="Low risk" aei:type="ELSE_IF" bpmnElement="128257882655900233ifDef">
            <dc:Bounds height="111" width="184" x="0" y="0"/>
            <bpmndi:BPMNLabel aei:absoluteLocation="LOC {585,250}" aei:absoluteSize="DIM {43,15}" aei:anchor.location="4" aei:anchor.objectId="128257882656000237" aei:backgroundColor="RGB {255,255,255}" aei:font="FONT {Segoe UI,9,0}" aei:objectId="132103617876823663" aei:relative.location="LOC {-53,-7}" aei:sizeToFit="true" aei:text="Low risk" bpmnElement="128257882655900233ifDeflabel">
               <dc:Bounds height="-1" width="-1" x="0" y="0"/>
            </bpmndi:BPMNLabel>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {658,221}" aei:absoluteSize="DIM {125,53}" aei:backgroundImageLocation="icons/bpmn/activity/blocks/ActivityBlockGreen.png" aei:name="Format Approval Message" aei:objectId="128257882656100239" aei:type="ASSIGN" bpmnElement="128257882656100239">
            <dc:Bounds height="53" width="125" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:fromLiteral="&lt;loan:loanApprovalResponse xmlns:loan=&quot;http://schemas.active-endpoints.com/sample/LoanRequest/2008/02/loanRequest.xsd&quot;&gt;&#13;&#10;&#9;&lt;loan:responseToLoanRequest&gt;approved&lt;/loan:responseToLoanRequest&gt;&#13;&#10;&#9;&lt;loan:responseDescription&gt;Your excellent credit has earned you automatic approval for your loan!&lt;/loan:responseDescription&gt;&#13;&#10;&lt;/loan:loanApprovalResponse&gt;" aei:fromType="4" aei:objectId="132206072391513103" aei:toVariable="approve" aei:type="ASSIGN_COPY" bpmnElement="132206072391513103"/>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {648,211}" aei:absoluteSize="DIM {145,73}" aei:actySimState="0" aei:bpelName="" aei:joinConditionComp="" aei:objectId="128257882656100241" aei:type="Sequence" bpmnElement="128257882656100239wrappingSequence" isHorizontal="true">
            <dc:Bounds height="78" width="150" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {609,328}" aei:absoluteSize="DIM {184,111}" aei:objectId="128257882656200245" aei:text="High risk" aei:type="ELSE" bpmnElement="128257882655900233elseDef">
            <dc:Bounds height="111" width="184" x="0" y="0"/>
            <bpmndi:BPMNLabel aei:absoluteLocation="LOC {585,365}" aei:absoluteSize="DIM {47,15}" aei:anchor.location="4" aei:anchor.objectId="128257882656200245" aei:backgroundColor="RGB {255,255,255}" aei:font="FONT {Segoe UI,9,0}" aei:objectId="132103617876823673" aei:relative.location="LOC {-53,-28}" aei:sizeToFit="true" aei:text="High risk" bpmnElement="128257882655900233elseDeflabel">
               <dc:Bounds height="-1" width="-1" x="0" y="0"/>
            </bpmndi:BPMNLabel>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {658,357}" aei:absoluteSize="DIM {125,53}" aei:backgroundImageLocation="icons/bpmn/activity/blocks/ActivityBlockRootBeer.png" aei:name="Format Denial Message" aei:objectId="128257882656300247" aei:type="ASSIGN" bpmnElement="128257882656300247">
            <dc:Bounds height="53" width="125" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:fromLiteral="&lt;loan:loanApprovalResponse xmlns:loan=&quot;http://schemas.active-endpoints.com/sample/LoanRequest/2008/02/loanRequest.xsd&quot;&gt;&#13;&#10;&#9;&lt;loan:responseToLoanRequest&gt;declined&lt;/loan:responseToLoanRequest&gt;&#13;&#10;&#9;&lt;loan:responseDescription&gt;We are sorry, this application falls out side of our credit risk guidelines.&lt;/loan:responseDescription&gt;&#13;&#10;&#9;&lt;loan:rejectionReason&gt;&#13;&#10;&#9;&#9;&lt;loan:reason&gt;lowCredit&lt;/loan:reason&gt;&#13;&#10;&#9;&#9;&lt;loan:description&gt;low credit score&lt;/loan:description&gt;&#13;&#10;&#9;&lt;/loan:rejectionReason&gt;&#13;&#10;&lt;/loan:loanApprovalResponse&gt;" aei:fromType="4" aei:objectId="132206081188413109" aei:toVariable="approve" aei:type="ASSIGN_COPY" bpmnElement="132206081188413109"/>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {648,347}" aei:absoluteSize="DIM {145,73}" aei:actySimState="0" aei:bpelName="" aei:joinConditionComp="" aei:objectId="128257882656300249" aei:type="Sequence" bpmnElement="128257882656300247wrappingSequence" isHorizontal="true">
            <dc:Bounds height="78" width="150" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:absoluteLocation="LOC {878,285}" aei:absoluteSize="DIM {70,60}" aei:name="Auto Review Reply" aei:objectId="128257882656500253" aei:type="REPLY" bpmnElement="128257882656500253">
            <dc:Bounds height="60" width="70" x="0" y="0"/>
            <bpmndi:BPMNLabel aei:absoluteLocation="LOC {875,342}" aei:absoluteSize="DIM {98,15}" aei:anchor.location="1" aei:anchor.objectId="128257882656500253" aei:backgroundColor="RGB {255,255,255}" aei:font="FONT {Segoe UI,9,0}" aei:objectId="132103617876823677" aei:relative.location="LOC {-48,47}" aei:sizeToFit="true" aei:text="Auto Review Reply" bpmnElement="128257882656500253label">
               <dc:Bounds height="-1" width="-1" x="0" y="0"/>
            </bpmndi:BPMNLabel>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:catchAllFaults="false" aei:catchFaultName="approvews:loanProcessFault faultType=0" aei:expanded="true" aei:expandedSize="DIM {-1,-1}" aei:objectId="128257882635400149" aei:text="Catch loanProcessFault" aei:type="CATCH" bpmnElement="128257882635400149" isHorizontal="false">
            <dc:Bounds height="160" width="110" x="5" y="5"/>
            <bpmndi:BPMNLabel aei:anchor.location="7" aei:anchor.objectId="128257882635400149" aei:backgroundColor="RGB {255,255,255}" aei:font="FONT {Segoe UI,9,0}" aei:objectId="132103617875323571" aei:relative.location="LOC {0,-7}" aei:sizeToFit="true" aei:text="Catch loanProcessFault" bpmnElement="128257882635400149label">
               <dc:Bounds height="-1" width="-1" x="0" y="0"/>
            </bpmndi:BPMNLabel>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:name="ReplyWithApprovalFault" aei:objectId="128257882636400153" aei:type="REPLY" bpmnElement="128257882636400153">
            <dc:Bounds height="60" width="70" x="0" y="0"/>
            <bpmndi:BPMNLabel aei:anchor.location="1" aei:anchor.objectId="128257882636400153" aei:backgroundColor="RGB {255,255,255}" aei:font="FONT {Segoe UI,9,0}" aei:objectId="132103617875323569" aei:relative.location="LOC {-58,47}" aei:sizeToFit="true" aei:text="ReplyWithApprovalFault" bpmnElement="128257882636400153label">
               <dc:Bounds height="-1" width="-1" x="0" y="0"/>
            </bpmndi:BPMNLabel>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:actySimState="0" aei:bpelName="" aei:joinConditionComp="" aei:objectId="128257882636500155" aei:type="Sequence" bpmnElement="128257882636400153wrappingSequence" isHorizontal="false">
            <dc:Bounds height="85" width="95" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:catchAllFaults="false" aei:catchFaultName="riskws:loanProcessFault faultType=0" aei:expanded="true" aei:expandedSize="DIM {-1,-1}" aei:objectId="128257882637400159" aei:text="Catch loanProcessFault" aei:type="CATCH" bpmnElement="128257882637400159" isHorizontal="false">
            <dc:Bounds height="-1" width="-1" x="220" y="10"/>
            <bpmndi:BPMNLabel aei:anchor.location="7" aei:anchor.objectId="128257882637400159" aei:backgroundColor="RGB {255,255,255}" aei:font="FONT {Segoe UI,9,0}" aei:objectId="132103617875323583" aei:relative.location="LOC {0,-7}" aei:sizeToFit="true" aei:text="Catch loanProcessFault" bpmnElement="128257882637400159label">
               <dc:Bounds height="-1" width="-1" x="0" y="0"/>
            </bpmndi:BPMNLabel>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:name="ReplyWithAssessmentFault" aei:objectId="128257882637500163" aei:type="REPLY" bpmnElement="128257882637500163">
            <dc:Bounds height="60" width="70" x="0" y="0"/>
            <bpmndi:BPMNLabel aei:anchor.location="1" aei:anchor.objectId="128257882637500163" aei:backgroundColor="RGB {255,255,255}" aei:font="FONT {Segoe UI,9,0}" aei:objectId="132103617875323581" aei:relative.location="LOC {-65,47}" aei:sizeToFit="true" aei:text="ReplyWithAssessmentFault" bpmnElement="128257882637500163label">
               <dc:Bounds height="-1" width="-1" x="0" y="0"/>
            </bpmndi:BPMNLabel>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:actySimState="0" aei:bpelName="" aei:joinConditionComp="" aei:objectId="128257882637600165" aei:type="Sequence" bpmnElement="128257882637500163wrappingSequence" isHorizontal="false">
            <dc:Bounds height="85" width="95" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:catchAllFaults="false" aei:catchFaultName="b4p:taskExpired faultType=0" aei:expanded="true" aei:expandedSize="DIM {-1,-1}" aei:objectId="128257882637700169" aei:text="Catch taskExpired" aei:type="CATCH" bpmnElement="128257882637700169" isHorizontal="false">
            <dc:Bounds height="-1" width="-1" x="430" y="10"/>
            <bpmndi:BPMNLabel aei:anchor.location="7" aei:anchor.objectId="128257882637700169" aei:backgroundColor="RGB {255,255,255}" aei:font="FONT {Segoe UI,9,0}" aei:objectId="132103617875323599" aei:relative.location="LOC {0,-7}" aei:sizeToFit="true" aei:text="Catch taskExpired" bpmnElement="128257882637700169label">
               <dc:Bounds height="-1" width="-1" x="0" y="0"/>
            </bpmndi:BPMNLabel>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:name="Notify_CRM_Of_Expiration" aei:objectId="128257882638600171" aei:subprocessPath="" aei:type="INVOKE" bpmnElement="128257882638600171">
            <dc:Bounds height="53" width="125" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:implicitScopeIO="INPUT" aei:objectId="128257882639400179" aei:type="ASSIGN" bpmnElement="128257882639400179">
            <dc:Bounds height="-1" width="-1" x="0" y="0"/>
         </bpmndi:BPMNShape>
         <bpmndi:BPMNShape aei:fromLiteral="&lt;loan:loanApprovalResponse xmlns:loan=&quot;http://schemas.active-endpoints.com/sample/LoanRequest/2008/02/loanRequest.xsd&quot;&gt;&#13;&#10;                              &lt;loan:responseToLoanRequest&gt;declined&lt;/loan:responseToLoanRequest&gt;&#13;&#10;                              &lt;loan:responseDescription&gt;We regret that your application could not be processed under our Qik-Approve guidelines. Please reapply in person at one of our offices.&lt;/loan:responseDescription&gt;&#13;&#10;                              &lt;loan:rejectionReason&gt;&#13;&#10;                                 &lt;loan:reason&gt;infoRequired&lt;/loan:reason&gt;&#13;&#10;                                 &lt;loan:description&gt;Loan underwriting could not be completed in the recommended time window.&lt;/loan:description&gt;&#13;&#10;                              &lt;/loan:rejectionReason&gt;&#13;&#10;                           &lt;/loan:loanApprovalResponse&gt;" aei:fromType="4" aei:objectId="130807461413629185" aei:toPart="Document" aei:toVariable="parameters" aei:type="ASSIGN_COPY" bpmnElement="130807461413629185"/>
         <bpmndi:BPMNShape aei:actySimState="0" aei:bpelName="" aei:joinConditionComp="" aei:objectId="128257882638600173" aei:type="Sequence" bpmnElement="128257882638600171wrappingSequence" isHorizontal="false">
            <dc:Bounds height="78" width="150" x="0" y="0"/>
         </bpmndi:BPMNShape>
      </bpmndi:BPMNPlane>
   </bpmndi:BPMNDiagram>
   <ns3:extensions>
      <ns3:extension mustUnderstand="no" namespace="http://www.activebpel.org/2009/02/bpel/extension/ignorable"/>
      <ns3:extension mustUnderstand="no" namespace="http://www.omg.org/spec/BPMN/20100524/DI"/>
      <ns3:extension mustUnderstand="yes" namespace="http://www.activebpel.org/2006/09/bpel/extension/query_handling"/>
      <ns3:extension mustUnderstand="yes" namespace="http://www.activebpel.org/2009/06/bpel/extension/links"/>
      <ns3:extension mustUnderstand="yes" namespace="http://www.example.org/BPEL4People"/>
      <ns3:extension mustUnderstand="yes" namespace="http://www.example.org/WS-HT"/>
   </ns3:extensions>
   <ns3:import aei:implicit="true" importType="http://schemas.xmlsoap.org/wsdl/" location="../wsdl/bpel/LoanProcess.private.wsdl" namespace="http://loanProcessHuman"/>
   <ns3:import importType="http://schemas.xmlsoap.org/wsdl/" location="../wsdl/loanMessages.wsdl" namespace="http://docs.active-endpoints.com/sample/wsdl/loanMessages/2008/02/loanMessages.wsdl"/>
   <ns3:import importType="http://www.w3.org/2001/XMLSchema" location="../schema/loanRequest.xsd" namespace="http://schemas.active-endpoints.com/sample/LoanRequest/2008/02/loanRequest.xsd"/>
   <ns3:import importType="http://schemas.xmlsoap.org/wsdl/" location="../wsdl/riskAssessment.wsdl" namespace="http://docs.active-endpoints.com/sample/wsdl/riskAssessment/2008/02/riskAssessment.wsdl"/>
   <ns3:import importType="http://schemas.xmlsoap.org/wsdl/" location="../wsdl/loanApproval.wsdl" namespace="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApproval.wsdl"/>
   <ns3:import aei:implicit="true" importType="http://schemas.xmlsoap.org/wsdl/" location="../wsdl/bpel/LoanProcess.public.wsdl" namespace="http://loanProcessHuman/public"/>
   <ns3:import importType="http://schemas.xmlsoap.org/wsdl/" location="../wsdl/loanProcess.wsdl" namespace="http://docs.active-endpoints.com/sample/wsdl/loanprocess/2008/02/loanProcess.wsdl"/>
   <ns3:import importType="http://schemas.xmlsoap.org/wsdl/" location="../wsdl/loanApprovalHuman.wsdl" namespace="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApprovalHuman.wsdl"/>
   <ns3:import importType="http://schemas.xmlsoap.org/wsdl/" location="../wsdl/loanCRM.wsdl" namespace="http://docs.active-endpoints.com/sample/wsdl/loanCRM/2008/02/loanCRM.wsdl"/>
   <ns3:import importType="res:/text/html" location="../form/task/ReminderToReps.html" namespace="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd"/>
   <ns3:import importType="res:/text/html" location="../form/task/NotifyReassignToManager.html" namespace="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd"/>
   <ns3:import importType="res:/text/html" location="../form/task/approveTask.html" namespace="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd"/>
   <ns3:partnerLinks>
      <ns3:partnerLink aei:id="130745801550392333" aei:interface="ns:LoanApproval" myRole="Provider" name="LoanProcessor" partnerLinkType="ns4:LoanProcessPLT"/>
      <ns3:partnerLink aei:id="130745801551392345" aei:interface="ns11:RiskAssessment" name="RiskAssessment" partnerLinkType="ns2:RiskAssessmentPLT" partnerRole="Provider"/>
      <ns3:partnerLink aei:id="130745801551392357" aei:interface="ns21:LoanCRM" name="CustomerService" partnerLinkType="ns2:LoanCRMPLT" partnerRole="Provider"/>
   </ns3:partnerLinks>
   <ns3:variables>
      <ns3:variable element="loan:loanProcessRequest" name="creditInformation"/>
      <ns3:variable element="loan:riskAssessmentResponse" name="riskAssessment"/>
      <ns3:variable element="loan:loanApprovalResponse" name="approve-task"/>
      <ns3:variable element="loan:approvalParameters" name="approvalParams"/>
      <ns3:variable element="loan:loanApprovalResponse" name="approve"/>
   </ns3:variables>
   <ns3:faultHandlers>
      <ns3:catch aei:id="128257882635400149" faultElement="loan:errorMessage" faultName="approvews:loanProcessFault" faultVariable="errorApprove">
         <ns3:reply aei:id="128257882636400153" faultName="loanprocess:unableToHandleRequest" name="ReplyWithApprovalFault" operation="request" partnerLink="LoanProcessor" variable="errorApprove"/>
      </ns3:catch>
      <ns3:catch aei:id="128257882637400159" faultMessageType="loanmsg:errorMessage" faultName="riskws:loanProcessFault" faultVariable="errorRisk">
         <ns3:reply aei:id="128257882637500163" faultName="loanprocess:unableToHandleRequest" name="ReplyWithAssessmentFault" operation="request" partnerLink="LoanProcessor" variable="errorRisk"/>
      </ns3:catch>
      <ns3:catch aei:id="128257882637700169" faultName="b4p:taskExpired">
         <ns3:scope aei:implicit="true" name="Notify_CRM_Of_Expiration">
            <ns3:variables>
               <ns3:variable messageType="loanmsg:approvalMessage" name="parameters"/>
            </ns3:variables>
            <ns3:sequence>
               <ns3:assign aei:id="128257882639400179">
                  <ns3:copy aei:id="130807461413629185">
                     <ns3:from>
                        <ns3:literal>
                           <loan:loanApprovalResponse>
                              <loan:responseToLoanRequest>declined</loan:responseToLoanRequest>
                              <loan:responseDescription>We regret that your application could not be processed under our Qik-Approve guidelines. Please reapply in person at one of our offices.</loan:responseDescription>
                              <loan:rejectionReason>
                                 <loan:reason>infoRequired</loan:reason>
                                 <loan:description>Loan underwriting could not be completed in the recommended time window.</loan:description>
                              </loan:rejectionReason>
                           </loan:loanApprovalResponse>
                        </ns3:literal>
                     </ns3:from>
                     <ns3:to part="Document" variable="parameters"/>
                  </ns3:copy>
               </ns3:assign>
               <ns3:invoke aei:id="128257882638600171" inputVariable="parameters" name="Notify_CRM_Of_Expiration" operation="notify" partnerLink="CustomerService"/>
            </ns3:sequence>
         </ns3:scope>
      </ns3:catch>
   </ns3:faultHandlers>
   <ns3:sequence aei:id="128257882650000183">
      <ns3:receive aei:id="128257882650100185" createInstance="yes" name="Receive_Application" operation="request" partnerLink="LoanProcessor" variable="creditInformation">
         <ns3:documentation>Loan Request receive event</ns3:documentation>
      </ns3:receive>
      <ns3:assign aei:id="128257882650400189" name="Get_Cutoff_Amount_for_Large_Loans">
         <ns3:documentation>Obtains the cutoff amount ceiling for large loans</ns3:documentation>
         <ns3:copy aei:id="130807461413629197" ignoreMissingFromData="yes">
            <ns3:from>abx:getCatalogResource("project:/CustomerService/runtimeParameters/approvalParameters.xml")</ns3:from>
            <ns3:to variable="approvalParams"/>
         </ns3:copy>
      </ns3:assign>
      <ns3:invoke aei:id="128257882650500193" inputVariable="creditInformation" name="Assess_Risk" operation="check" outputVariable="riskAssessment" partnerLink="RiskAssessment">
         <ns3:documentation>The Assess Risk rules service determines the level of risk of loans</ns3:documentation>
      </ns3:invoke>
      <ns3:if aei:id="128257882650600197" name="Large_loan_or_moderate_risk">
         <ns3:documentation>Process loan based on size and risk</ns3:documentation>
         <ns3:condition>(($riskAssessment/loan:riskAssessment != 'high' and $creditInformation/loan:amountRequested &gt;= $approvalParams/loan:amountRequiresHumanApproval) or $riskAssessment/loan:riskAssessment = 'review')</ns3:condition>
         <ns3:sequence aei:id="128257882651000203">
            <ns3:scope aei:implicit="true" name="Under_Review">
               <ns3:variables>
                  <ns3:variable messageType="loanmsg:approvalMessage" name="parameters"/>
               </ns3:variables>
               <ns3:sequence>
                  <ns3:assign aei:id="128257882651200215">
                     <ns3:copy aei:id="130807461414629221">
                        <ns3:from>
                           <ns3:literal>
                              <loan:loanApprovalResponse>
                                 <loan:responseToLoanRequest>underReview</loan:responseToLoanRequest>
                                 <loan:responseDescription/>
                              </loan:loanApprovalResponse>
                           </ns3:literal>
                        </ns3:from>
                        <ns3:to part="Document" variable="parameters"/>
                     </ns3:copy>
                  </ns3:assign>
                  <ns3:reply aei:id="128257882651000205" name="Under_Review" operation="request" partnerLink="LoanProcessor" variable="parameters">
                     <ns3:documentation>Under Review response event</ns3:documentation>
                  </ns3:reply>
               </ns3:sequence>
            </ns3:scope>
            <ns3:extensionActivity>
               <b4p:peopleActivity aei:id="128257882651400219" inputVariable="creditInformation" name="Review_Loan" outputVariable="approve-task">
                  <ns3:documentation>Large or moderate risk loan are reviewed by Loan Reps. Customer Service is then notified of the outcome.</ns3:documentation>
                  <b4p:localTask reference="approveTask" xmlns:abx="http://www.activebpel.org/bpel/extension" xmlns:aei="http://www.activebpel.org/2009/02/bpel/extension/ignorable" xmlns:approvews="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApproval.wsdl" xmlns:b4p="http://www.example.org/BPEL4People" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:crmws="http://docs.active-endpoints.com/sample/wsdl/loanCRM/2008/02/loanCRM.wsdl" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:ext="http://www.activebpel.org/2006/09/bpel/extension/query_handling" xmlns:ext1="http://www.activebpel.org/2009/06/bpel/extension/links" xmlns:htd="http://www.example.org/WS-HT" xmlns:loan="http://schemas.active-endpoints.com/sample/LoanRequest/2008/02/loanRequest.xsd" xmlns:loanhuman="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApprovalHuman.wsdl" xmlns:loanmsg="http://docs.active-endpoints.com/sample/wsdl/loanMessages/2008/02/loanMessages.wsdl" xmlns:loanprocess="http://docs.active-endpoints.com/sample/wsdl/loanprocess/2008/02/loanProcess.wsdl" xmlns:ns1="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" xmlns:ns2="http://loanProcessHuman" xmlns:ns3="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:ns4="http://loanProcessHuman/public" xmlns:riskws="http://docs.active-endpoints.com/sample/wsdl/riskAssessment/2008/02/riskAssessment.wsdl" xmlns:types1="http://schemas.active-endpoints.com/sample/LoanMod/2009/loanMod.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                     <htd:peopleAssignments/>
                  </b4p:localTask>
                  <b4p:scheduledActions xmlns:abx="http://www.activebpel.org/bpel/extension" xmlns:aei="http://www.activebpel.org/2009/02/bpel/extension/ignorable" xmlns:approvews="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApproval.wsdl" xmlns:b4p="http://www.example.org/BPEL4People" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:crmws="http://docs.active-endpoints.com/sample/wsdl/loanCRM/2008/02/loanCRM.wsdl" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:ext="http://www.activebpel.org/2006/09/bpel/extension/query_handling" xmlns:ext1="http://www.activebpel.org/2009/06/bpel/extension/links" xmlns:htd="http://www.example.org/WS-HT" xmlns:loan="http://schemas.active-endpoints.com/sample/LoanRequest/2008/02/loanRequest.xsd" xmlns:loanhuman="http://docs.active-endpoints.com/sample/wsdl/loanApproval/2008/02/loanApprovalHuman.wsdl" xmlns:loanmsg="http://docs.active-endpoints.com/sample/wsdl/loanMessages/2008/02/loanMessages.wsdl" xmlns:loanprocess="http://docs.active-endpoints.com/sample/wsdl/loanprocess/2008/02/loanProcess.wsdl" xmlns:ns1="http://schemas.active-endpoints.com/avc/2009/07/avoscentral-forms.xsd" xmlns:ns2="http://loanProcessHuman" xmlns:ns3="http://docs.oasis-open.org/wsbpel/2.0/process/executable" xmlns:ns4="http://loanProcessHuman/public" xmlns:riskws="http://docs.active-endpoints.com/sample/wsdl/riskAssessment/2008/02/riskAssessment.wsdl" xmlns:types1="http://schemas.active-endpoints.com/sample/LoanMod/2009/loanMod.xsd" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
                     <b4p:expiration>
                        <b4p:for>'PT180M'</b4p:for>
                     </b4p:expiration>
                  </b4p:scheduledActions>
               </b4p:peopleActivity>
            </ns3:extensionActivity>
            <ns3:invoke aei:id="128257882655200221" inputVariable="approve-task" name="Notify_Customer_Service_Of_Decision" operation="notify" partnerLink="CustomerService">
               <ns3:documentation>The Customer Service notifies the customer service team to communicate the outcome of the loan review decision to the customer.</ns3:documentation>
            </ns3:invoke>
            <ns3:empty aei:id="128257882655300223"/>
         </ns3:sequence>
         <ns3:else aei:id="128257882655800229">
            <ns3:sequence aei:id="128257882655900231">
               <ns3:if aei:id="128257882655900233">
                  <ns3:documentation>Prepares Approval and Denial Message responses for low and high risk loans</ns3:documentation>
                  <ns3:condition>$riskAssessment/loan:riskAssessment = 'low'</ns3:condition>
                  <ns3:assign aei:id="128257882656100239" name="Format_Approval_Message">
                     <ns3:documentation>Prepares an "approved" response with a description of "Your excellent credit has earned you automatic approval for your loan!"</ns3:documentation>
                     <ns3:copy aei:id="132206072391513103">
                        <ns3:from>
                           <ns3:literal>
                              <loan:loanApprovalResponse>
	<loan:responseToLoanRequest>approved</loan:responseToLoanRequest>
	<loan:responseDescription>Your excellent credit has earned you automatic approval for your loan!</loan:responseDescription>
</loan:loanApprovalResponse>
                           </ns3:literal>
                        </ns3:from>
                        <ns3:to variable="approve"/>
                     </ns3:copy>
                  </ns3:assign>
                  <ns3:else aei:id="128257882656200245">
                     <ns3:assign aei:id="128257882656300247" name="Format_Denial_Message">
                        <ns3:documentation>Prepares a "declined" response with a description of "We are sorry, this application falls out side of our credit risk guidelines."&#13;
The reason provided is "lowCredit".</ns3:documentation>
                        <ns3:copy aei:id="132206081188413109">
                           <ns3:from>
                              <ns3:literal>
                                 <loan:loanApprovalResponse>
	<loan:responseToLoanRequest>declined</loan:responseToLoanRequest>
	<loan:responseDescription>We are sorry, this application falls out side of our credit risk guidelines.</loan:responseDescription>
	<loan:rejectionReason>
		<loan:reason>lowCredit</loan:reason>
		<loan:description>low credit score</loan:description>
	</loan:rejectionReason>
</loan:loanApprovalResponse>
                              </ns3:literal>
                           </ns3:from>
                           <ns3:to variable="approve"/>
                        </ns3:copy>
                     </ns3:assign>
                  </ns3:else>
               </ns3:if>
               <ns3:reply aei:id="128257882656500253" name="Auto_Review_Reply" operation="request" partnerLink="LoanProcessor" variable="approve">
                  <ns3:documentation>Auto Review response event</ns3:documentation>
               </ns3:reply>
            </ns3:sequence>
         </ns3:else>
      </ns3:if>
   </ns3:sequence>
</ns3:process>
